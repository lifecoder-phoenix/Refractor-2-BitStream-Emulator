using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Net;
using System.Net.Sockets;
using Battlefield_BitStream.Core.IO;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using Battlefield_BitStream.Core.Structs;
using Battlefield_2_BitStream.GameEvents;
using Battlefield_BitStream.Core.Networking;
using Battlefield_BitStream.Core.Helpers;
using VFS;
using Battlefield_BitStream.Core.Data;

namespace Battlefield_BitStream
{
    class Program
    {
        static void Main(string[] args)
        {
            Config.Initialize(args);
            Config.BF2Engine.LoadLevel(Config.BF2Engine.MapList[0]);//load the first level in the list
            var netServer = new NetworkingServer();
            /*var fileName = VFileSystemManager.GetFileByName("ladder_4m.con");
            var files = VFileSystemManager.GetFilesByExtension(".con");
            int i = 0;
            foreach (var file in files)
            {
                Config.LoadedMod.GetConFileProcessor().ExecuteConFile(file);
            }*/
            /*DevelopmentHelper.DeconstructPacket("0fa0141f0000003b0132242380864e07000081033c892f1ce67a5814f2a7a60866a87500002838c0c470bfe1666645218115c960867407000083030400c81a46359214020000074a662623040000000800000060507900003838c00c8266e1b8be4ba10cc275a1000018420000008000000000869507000084032c065f178eebbb146a3b1f160a008021040000000800000060607900004838c01ea582e1b8be4b21fa3e4ea100001842000000800000000086b1070000850364e5e41dd6cca617e24fc81b4e66b62d040000000800000060207b00005838c043f3e461fed478a18ff2b9e16466db42000000800000000086b207000086030400ea1efe53c9170aacfc1a4e66b62d040000000800000060107c000068385000a008a266e651210080aba10000b442000000800000000086ca07008087830455f31e7ee936146a263e2166");
            DevelopmentHelper.DeconstructPacket("0fb0141f00000032012a2886cb070000880305000a208aebf3140200d01a62f8830000a838402000f321884f4e214500cca10a0007c380967dbe824f8ebd86510800809403345d071fbedc3a14e2819c200e000000709a6c0d0c0000006018850000583940f453e4e1439570a1c13bc1e1dc2c93c2ed69cec02d7f3a3a06c008000097037c97ee1f0ec041146a41a9217e450122b4ff3bf95b54c5b963188d00008839c02194f9e139c644217abf1ce2d74a1f421fa49dbe5955143c86e80800809903aca0531fbec045141a057b205eae8fa3b34446fdeb4194c763988f0000c8394004c006a2e7e853214801dba18afb33c3910e13bfe4fb633d860c0900809d031400d81fa2abfd14f202fc1c8afe3f33ac11e3dd5b3843aa6bd0910000403a40f4ff8f2153694521f27f8ca1407506c32444803c42bf54bc06");
            DevelopmentHelper.DeconstructPacket("0fc0141f0000003e012a2c0650090000a803c4fc0f1a9ef698172a02601c2eff9f2144d750c2d39e7ad96b00950000903a40c24ade618cdd2d21d5269ba133fff94292eb2b3c29a89bbd8670090080ac03d497061ed6a56114a2244b20fe7b1be86b29d8da9b7439a26b08970000f03a40b4cfdfe1a59249a1d895b1e1275dddc259bdaabd25697aba8670090080b103fc36901bd6a55914da3dcb083e146d2a340997da2b5e17a963f0990000303c401efd922141be44a1197e86a14d39b5c26aa40740ce6b513d069f090080c40344714c1f22e4db147afab21abaa4293114ef7a00945c95d563f0990000603c401200f5215eca4d21fffcbaa1dbf03243a32d06407c6e623d069f090080c7035c24ca17b2bc4b14ea9426180a6d030ba4465f0064170cd56b989a0000083dc0057eda613d5946a19626fee1dcdce8c1b2734bc09436a24006");
            DevelopmentHelper.DeconstructPacket("0fd0141f0000003e012a3086a9090000d203ec492e1e66d063149a974c20bef64c9ba3ffe6e1e3f43cc363989a0000383d4011e8dee1b06a2da19f198da10200b44213601e3ef3d8313c86a9090000d503cc66801b66d05b14aa3b120f6edc7577439802e2c3f62bc363989a0000683d40719cf861063d43a1f67819e248cdac41164d1e3e1da9353c86a9090000d8035496dc1f26c66b174249b615be7691311c9ce6e193af54c363989a0000983d400a999ae1f0467921e2f1c2e1450bfec10de414c0f912ac3f86a9090000db032c546d1ea6549b14421cb51a1e2fd02e743d00e273e34bc363989a0000c83d40faffb161e7d744a1df7fcda1faff33c31d721e3eefa9333c86d5090000e003e408e81d0eeade12d20010189a65252b44b956effb846bd063589d0000103ec0ce08e561fe7e46a1577700e26e40a8b99171f5bea2d9063d06");
            DevelopmentHelper.DeconstructPacket("0fe0141f0000003e012a3486d5090000e2034c360520a6e56f175264fa186e241120a47856efcb8e6ed063589d0000303e40b0ddaa61df194521608ecea1ba693343dd61f3be47f7a93c86f6090000e603c4fe0f18fae94e144aff2f173a21751c2460edd383e4c2d16370a00000e83ec03d80a0a1605241a111007ea13031c4c2adc9f8bdf5be80ba86300a0000f50394fb0f1a22b614144aca3617faff3f2bdc3275da530fead16b08a30000603fc0166c8d2131ab41a1c3a177a171c96dc220d405c1cb99c64006bd0a0000df841402e81b060018149298cf1f7e6e42180c0000000800000060d0ab0000f84d487929c061008041a1e58402e2313393c1000000800000000006bd0a0000e084fca91f1c060018146a3c771ffe2691150c0000000800000060f8ab0000984e400040de61353e462100809ae179e99f41000000800000000006");
            DevelopmentHelper.DeconstructPacket("0ff0141f0000002d012e3886bf0a0000ea0404d52e1e060058148a417e1f66f8ab0000a84e400000a261d59878210040c36186bf0a0000eb04a41a191ae6a541149a44961cca49742c04000000080000006030ac0000e84e400000ab2102ab2221000014a1373432c3000000800000000006c30a0000ef0454e3d91732085c14f27c3819baa121280c000000080000006030ac0000f84e400040f7a199194d210080ada1feff3343000000800000000006c30a0000f0040400b0199a99091402002016daf727330c000000080000006040ad0000204f40aad9db6100804221b211096286d80a0080f304a41abc1a8eeb8914daceb7060e00000f04000000080000006088ad0000404f40ac6cf0e1472147a1681d05e20000b4c2000000800000000086d80a0080f40464bae21d7e939a148a96a41f66");
            DevelopmentHelper.DeconstructPacket("0f00151f00000032012a3c86d80a0000f504c41f701ef6a79a14f2d2951f6688ad0000584fc04506aee1e71b492189417aa0feff3342000000800000000086d80a0000f604e4a5b31b5e645314da78821c0a00402b0c000000080000006088ad0000684f40857b9ee1662648a174e3c4a10000b442000000800000000086dc0a0080fa043c89e51612586314bac8bc189ac633230c0000000800000060c8ad0000b04fc0ebe1f32181354ea1c6fba5a1feff33c3000000800000000086df0a0000fc04a4702518f2d2e514b29d281aeaff3f33040000000800000060f8ad0000c84f4000800022cd4c4e210080a4a1feff33c3000000800000000086df0a0000fd04c49fc819125881130a81f513caa1a1310c000000080000006038ae0000d84fd047416021000059a1c8a6b4a10000b4c2000000800000000086");
            DevelopmentHelper.DeconstructPacket("0f10151f0000003001364086e30a0000fe04b54783149a99191552e3af180a00402b0c000000080000006038ae0000e84fd08d973ba1666654a1c03aaca10000b4c2000000800000000006440b00000705040010190ad7a7140200c0196248b4000078504087d64861d5b83ca13b1f692106450b000008050400881d56b8be120200e0186258b400008850400000ae615e1a44210080c92106460b000009050400101c060050140200000b6668b40000985040ae67e4e145f648a1c8b6af6106470b00000a0534086c1a16581d18628f4b1c6678b40000a85040fabefb6100007621d9ee696106480b00000b05dca3131e06005814ca6010206698750000c050404e5ad56177fe2c214ef290a1cbcc04c2000000800000000086590700800d050400b81c7668f9170200981b1e33032d040000000800000060");
            DevelopmentHelper.DeconstructPacket("0f20151f00000032012a4486590700000e05cccbbd1c7668f9177abec31b4e66b62c04000000080000006098750000e850400080ebe1e9064621000003e2cccc8ac2000000800000000086740700800f05d4f76618e67a68122a87b8150a33432f040000000800000060487700000051c0144e702181951f210ad741e13133b74200000080000000008674070080100534332117f27cef11bac824160e00202b040000004866660c64e8740000205140088caf6181d545217969e4e0cbccecc20000008000000000864e07008012059418bb1b9e6e681432086c10eeff3f23040000000800000060e87400003051400000b761798945210000c01f864e0700801305448bba1b9e6e6814a2ef4b108e998930040000000800000060e8740000405140b24dbbe1e98646a16ed204e19a99c0c2000000800000000086");
            DevelopmentHelper.DeconstructPacket("0f30151f00000040015a48864e07008014050400d01a9697881402000009aa99092c0c0000000800000060e87400005051c070ddb06181d545215c0fc6e0feffb4420000008000000000864e0700801505f47cfb1a16585d149297760e66e8740000685140b4e8e5e1eb9146214cb7a0e1000000800000b4429899d2c2864e07000017056ce6581e16836c143a890e1a6630010000805140f5e6ae61145cbda10e7ac1e1000000800000b442000000000613000080180504000000b81eaa1902000000080000000800402b0400000060207c00009851480080f5e17288412100800ae2feff33c300000080000000002380b9002965e480404e007ac74820901b8846491608e408a24e640602b9826859d78140ce202a148720903b883ef52408e410a4bda30a02b9842858df82404e214a46ca20905b880a953408e480037f7f4202b960c1dfdf9000");
            DevelopmentHelper.DeconstructPacket("0f40151f0000009d005a4c39e1c0df1f91406e58f0f7572490230efcfd1909e48a057f7f470239e3c0df1f9240ee58f0f7972490430efcfd2909e492057f7f4b0239e5c0df1f93406e59f0f7d72490630efcfd3909e49a057f7f4f0239e7c0df1f9440ee59f0f7172590830efcfd4909e4a2057f7f530239e9c0df1f95406e5af0f7572590a3064f4a5a09e4aac145385702b800000000000000808511000000000000000000");

            DevelopmentHelper.DeconstructPacket("9ff1151f00000032013e78a38c9f090600008081a4780c62e6c485218fd11222888f05030040d0409c448db03ef3ad101b88cbb0c4278501000078a0cf6471f89a77640856db71c8e693c20000103c100ba31f1cd8112cb41e073664f1616100000820680f551c9eb2251992cf7a1ca2f8ec31000000141c0ca6097199f30add3b6a0d8b7cf6180000020a8808f48465658285c23c0f87443e7f0c0000410524df38c4aebfcf42315e2844331f40060080c0029dc71c62d7df6721da3d14228b8f200300007081db52cb505e0fae50ddc2e530c54790010020b84019c77018ce4f5c0824386b88c2b0cc000010648049f118c4cc890b431ea325440ccc0c00007c064844a0272c2b132c14e67938f4587c531800000010000000c0c0cc0000e06780711235c2faccb7426c202ec333b32b8600000000010000000c");
            DevelopmentHelper.DeconstructPacket("ef80141f0000002f01321c2387861800000041012c060e1c0eacea18020050150a00402b0400000008000000609001000018144054231fe1beaf8b217b649aa10000b4420000008000000000063807000082030c56f0157ebe8918daf92d1c0a00402b040000000800000060e87400002838c0e5308c61502d8e21231b1de10000b4410000008000000000864f070000830324b0221af6a7b2186a66741962187500003838c0990995615e8a8e21000041e1feff334300000080000000008653070000840324b052059ec4e51882eaa01c62407500004838c099c9a2e1e73b8b2179198aa10000b4c2000000800000000086560700008503cc76b41b8695e918b21c020f66787500005838c0182488e114ae8ba1912dc1a10000b4c20000008000000000065807000086032c5c9419c6cab9184ae1d61862");

            DevelopmentHelper.DeconstructPacket("9ff1151f00000032013e78a38c9f090600008081a4780c62e6c485218fd11222888f05030040d0409c448db03ef3ad101b88cbb0c4278501000078a0cf6471f89a77640856db71c8e693c20000103c100ba31f1cd8112cb41e073664f1616100000820680f551c9eb2251992cf7a1ca2f8ec31000000141c0ca6097199f30add3b6a0d8b7cf6180000020a8808f48465658285c23c0f87443e7f0c0000410524df38c4aebfcf42315e2844331f40060080c0029dc71c62d7df6721da3d14228b8f200300007081db52cb505e0fae50ddc2e530c54790010020b84019c77018ce4f5c0824386b88c2b0cc000010648049f118c4cc890b431ea325440ccc0c00007c064844a0272c2b132c14e67938f4587c531800000010000000c0c0cc0000e06780711235c2faccb7426c202ec333b32b8600000000010000000c");
            DevelopmentHelper.DeconstructPacket("9f01161f0000002d012e7c06660600803f038c85d10f0eec08165a8f031b5af10e2a0c0000000800000060606600000034c0f650c5e1295b9221f9acc72106660600804003ec33591cbee61d1982d5761c62a0660000e83740b7a596a1bc1e5ca1ba85cbe1d6ce73420000008000000000066a0600007f03d479cc2176fd7d16a2dd4321da4d762f040000000800000060a0660000f83740926f1c62d7df67a1182f14a2ba3f18c30000008000000000066a060000800354c6311c86f313170209ce1a62a06600000838c083c134212e735ea17b47ade149ed17c20000008000000000864e0700008103fc7e5a1d7a9358162a5c161c6e664e310c0000000800000060f87400001838c01affdfa16a7c65a1979ea06106720700808203cc761218b21c0e16ea51dd184a66662c040000000800000060");
            */
            DevelopmentHelper.DeconstructPacket("6f200803000000cf001204840000000041010000043f1a003d484d3d2048616c6c2d4d616e6961204d6978205365727665720100e3003d484d3d2048616c6c2d4d616e6961204d697820536572766572202870726f043f7669646564206279206266326c2e6465297c2020202020202020202020202020202020202020202020202056656869636c653a204d6f202b20446f7c202020043f2020202020202020202020496e66616e747269653a204469202b204d69202b204672202b205361202b20536f7c7c20202020202020202020486f6d6570616700");
            DevelopmentHelper.DeconstructPacket("6f3008030000008d000e08043f653a20687474703a2f2f7777772e68616c6c2d6d616e69612e64657c2020202020202020202020205465616d737065616b333a203231322e3232342e38342e043f36383a39313334cf00000080a4eca36c03000000693a06000000060000001e000080110090000000c003000000a30200001900000019000060320000001000040600003200000020");
            DevelopmentHelper.DeconstructPacket("6f400803000000cf00120c84050000000d010000043f0a00000009006b756272615f64616d060067706d5f637140000c0064616c69616e5f706c616e74060067706d5f637140001100726f61645f746f5f6a616c61043f6c61626164060067706d5f637140001000646171696e675f6f696c6669656c6473060067706d5f637140000c0067756c665f6f665f6f6d616e060067706d5f043f637140000d006d617368747575725f63697479060067706d5f637140000d007461726162615f717561727279060067706d5f6371400014006f70657261746900");
            DevelopmentHelper.DeconstructPacket("6f30100f0000003e000a08840100000030000000043009004c696665436f6465721ce5fa5d040000000000180045654a6635473469464f376f51424e6e5343444772545f5f01b2");
            DevelopmentHelper.DeconstructPacket("6f500c070000002001261005018303000000204c696665436f64657200000000000000000000000000000000000000000000b6948c822040000000001015313319369516b1373a991880460ae33f00001c83460ae33f00006c31428a426080000000001015313319369516b1373a99190000000000000000000000000000000000008082a0c0000000001015313319369516b1373a19180000000000000000000000000000000000008042e000010000001015313319369516b1373a191a00000000000000000000000000000000000080822041010000001015313319369516b137ba981c00000000000000000000000000000000000080426081010000001015313319369516b1373a19190000000000000000000000000000000000000055060000000000000004");
            DevelopmentHelper.DeconstructPacket("6f40141f0000001000060c2703323b833239ff040000000000");
            DevelopmentHelper.DeconstructPacket("6f60100f00000023011a14043f6f6e736d6f6b6573637265656e060067706d5f6371400010006f7065726174696f6e68617276657374060067706d5f637140001100737472696b655f61745f04116b61726b616e64060067706d5f63714000840000000041010000043f1a003d484d3d2048616c6c2d4d616e6961204d6978205365727665720100e3003d484d3d2048616c6c2d4d616e6961204d697820536572766572202870726f043f7669646564206279206266326c2e6465297c2020202020202020202020202020202020202020202020202056656869636c653a204d6f202b20446f7c202020043f2020202020202020202020496e66616e747269653a204469202b204d69202b204672202b205361202b20536f7c7c20202020202020202020486f6d6570616700");
            Console.ReadLine();
        }
    }
}